<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Obrigado pelo pagamento!</title>
<style>
  body {
    background: linear-gradient(135deg, #111, #222);
    color: #fff;
    font-family: "Poppins", sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
    text-align: center;
    padding: 0 20px;
  }
  h1 { font-size: 2rem; margin-bottom: 10px; }
  p { font-size: 1.1rem; color: #ccc; margin-bottom: 40px; max-width: 90%; }
  .btn {
    display: block;
    width: 260px;
    padding: 15px 20px;
    margin: 12px auto;
    border: none;
    border-radius: 12px;
    font-size: 1rem;
    font-weight: bold;
    text-transform: uppercase;
    cursor: pointer;
    transition: 0.3s;
    text-decoration: none;
    box-shadow: 0 0 10px rgba(255,255,255,0.1);
    color: #fff;
    background: linear-gradient(90deg, #ff0057, #ff7b00);
  }
  .btn:hover { transform: scale(1.05); box-shadow: 0 0 20px rgba(255,120,0,0.6); }
  footer { margin-top: 50px; font-size: 0.9rem; color: #777; }
</style>
</head>
<body>
<h1>Obrigado pelo pagamento!</h1>
<p id="message">Verificando seu pagamento...</p>

<a id="vip-link" href="https://t.me/+PbZt1Z72R001MmIx" class="btn" target="_blank" style="display:none;">
  Entrar no Grupo VIP Agora
</a>

<footer>© 2025 | Acesso Exclusivo</footer>

<script>
  // Lista de tokens válidos (exemplo)
  const validTokens = ["TOKEN1", "TOKEN2", "TOKEN3"]; 

  const params = new URLSearchParams(window.location.search);
  const token = params.get("token");

  const message = document.getElementById("message");
  const vipLink = document.getElementById("vip-link");

  // --- META PIXEL CODE ---
  !function(f,b,e,v,n,t,s)
  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
  n.callMethod.apply(n,arguments):n.queue.push(arguments)};
  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
  n.queue=[];t=b.createElement(e);t.async=!0;
  t.src=v;s=b.getElementsByTagName(e)[0];
  s.parentNode.insertBefore(t,s)}(window, document,'script',
  'https://connect.facebook.net/en_US/fbevents.js');

  // Inicializa o pixel único
  fbq('init', '1174595527982213');
  
  // Dispara PageView sempre
  fbq('track', 'PageView');

  // Dispara Purchase sempre que abrir a página (teste)
  fbq('track', 'Purchase', {
    value: 10.00,
    currency: 'BRL'
  });

  // Exibição condicional do botão
  if (token && validTokens.includes(token)) {
    message.innerHTML = "Seu acesso VIP foi liberado ✅<br/>Clique no botão abaixo para entrar no grupo exclusivo!";
    vipLink.style.display = "block";

    // Expira o token após 10 minutos
    setTimeout(()=>{
      const index = validTokens.indexOf(token);
      if(index !== -1) validTokens.splice(index,1);
      vipLink.style.display='none';
      message.innerHTML='Token expirado. Refaça o processo de pagamento.';
    },10*60*1000);
  } else {
    message.innerHTML = "Token inválido ou ausente. Por favor, finalize o pagamento para receber acesso.";
  }
</script>

<noscript>
  <img height="1" width="1" style="display:none"
  src="https://www.facebook.com/tr?id=1174595527982213&ev=Purchase&noscript=1"/>
</noscript>
</body>
</html>
